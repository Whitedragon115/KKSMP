let listFormats = ['RELATIVE', 'DATE', 'TIME', 'SHORT TIME', 'FULL']
let listUnformatted = ['R', 'D', 'T', 't', 'F']


async function create(date, format) {
    if (!date) throw new Error(`[Discord Timestamps] Date is not valid. If you have any problems read our docs.`)
    if (!format) throw new Error(`[Discord Timestamps] Format is not valid. If you have any problems read our docs.`)
    if (!listFormats.includes(format.toUpperCase())) throw new Error(`[Discord Timestamps] Format is not valid. If you have any problems read our docs.`)
    format = format.toUpperCase()

    if (isNaN(date)) {
        try {
            date = new Date(date).toISOString()
            let parsed = Date.parse(date) / 1000
			if (date == parsed) throw new Error(`[Discord Timestamps] Date is not valid. If you have any problems ready our docs.`)
            return `<t:${parsed}:${listUnformatted[listFormats.indexOf(format)]}>`
        } catch (err) {
            throw new Error(`[Discord Timestamps] Date is not valid. If you have any problems ready our docs.`)
        }
    } else if (!isNaN(date)) {
        try {
            date = date * 1000
            let b = (date + Date.now()) / 1000
            return `<t:${b.toFixed(0)}:${listUnformatted[listFormats.indexOf(format)]}>`
        } catch (err) {
            console.log(err)
        }
    } else {
		throw new Error(`[Discord Timestamps] Date is not valid. If you have any problems ready our docs.`)
	}
}


module.exports = { create }